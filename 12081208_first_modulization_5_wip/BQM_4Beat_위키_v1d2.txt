# BQM: The 4-Beat Model v1.2

# 0. 서문: 평균의 함정을 넘어서

기존 **BQM v5.x**모델은 사용자 입력 기반의 **'특정 상황에서의 동적 가치(Dynamic Value)'**를 시뮬레이션 했다. 그러나 **"방어력 +5"**는 상황에 따라 극단적인 가치 차이를 가진다.

- **절체절명:** 적 공격력이 6이고 내 체력이 1일 때, 방어력 +5는 **'생존(Infinite Value)'**을 의미한다.
- **무용지물:** 적이 공격하지 않거나 관통 공격을 할 때, 방어력 +5는 **'0(Zero Value)'**에 불과한다.

계산기의 본질이 흐려지며 시뮬레이터의 성격이 강해짐에 따라, 절대적인 기준점을 잡아내어 시뮬레이션은 모두 게임 클라이언트와 시뮬레이터에게 넘기는 것이 맞다고 판단 내렸다. 적 위협도 계산기와 장비 등급 계산기는 오로지 ‘적과 장비의 순수하고 절대적인 가치’를 매기는 데에 사용되어야 했기에 이후 나온 BQM v6.x 모델은 '표준 상황에서의 기대값(Mean)'을 계산했다. 그러나 "평균 10 데미지"는 두 가지 의미를 가질 수 있다.

- **안정형:** 항상 10 데미지. (생존)
- **도박형:** 50% 확률로 0, 50% 확률로 20 데미지. (실패 시 사망)

기존 모델은 이 둘을 동일하게 평가하는 치명적인 오류(The Flaw of Averages)를 범했다. **BQM 4-Beat Model**은 이 문제를 해결하기 위해 **'성능의 4가지 박자(4-Beats)'**를 측정하여, 상황 변수 없이도 장비와 적의 **'절대적인 등급(Absolute Tier)'**을 산출하려는 데에 목표가 있다.

# 1. 불변의 환경 상수

## 1.1. 가치 단위

**1.0 V = "방어력이 없는 적에게 입히는 확정 1 데미지"**

## 1.2. 선제권 상수

> 규칙: "적은 항상 플레이어보다 먼저 행동한다."
> 
- **보정:** 플레이어의 **방어/체력** 스탯, **`<반격>`** 키워드는 선공권 부재를 상쇄하는 필수 요소이므로 **재현성(Stb)**을 1.0(최상)으로 간주한다.
- **유일한 예외:** **장신구**의 여러 효과 중 '적과 플레이어의 순서를 바꾸는 효과'는 이 규칙을 역행하는 유일한 수단이므로 큰 가치를 부여한다.

## 1.3. 방어 가치 표준 (The 3-Hit Law)

> 규칙: "플레이어는 전투 중 평균 3회의 유효타를 허용한다."
> 
- **보정:** 기존 모델은 장기전을 가정하여 방어 효율을 과대평가했으나, 현대적 메타(속전속결)를 반영하여 **방어력(DEF) 1의 가치를 3.5 V**로 고정한다.
- **근거:** HP 1의 가치(1.0V) × 기대 피격 횟수(3.0) + 슬롯 점유 기회비용(0.5V).

# 2. 핵심 철학: 4대 지표

모든 키워드(`<관통>`, `<밀치기 X>` 등)와 게임의 요소와 규칙(HP, DEF, 타일, 임기응변, 명상 등)들은 다음 4가지 값을 반드시 정의해야 한다.

### 🎵 Beat 1. 최저점 (`Min` / Floor)

- **정의:** 조건이 불충족되거나, 주사위가 최악(0)으로 떴을 때의 성능.
- **의미:** **"최악의 상황에서 나를 살려주는가?" (Survival)**
- **가중치:** **2.0 (최상)**. 이 값이 0이면 가차 없이 점수가 깎인다.

### 🎵 Beat 2. 표준값 (`Std` / Baseline)

- **정의:** 표준 전투 가정(방어 0.5, 2.5턴 생존 등) 하에서의 평균 기대값.
- **의미:** **"평소에 밥값은 하는가?" (Efficiency)**
- **가중치:** **1.0 (중)**.

### 🎵 Beat 3. 최고점 (`Max` / Ceiling)

- **정의:** 모든 조건(크리티컬, 협공, 벽 충돌 등)이 완벽할 때의 이론상 최대 위력.
- **의미:** **"불가능한 상황을 뒤집을 수 있는가?" (Carry Potential)**
- **가중치:** **0.5 (하)**. 안정성이 담보되지 않은 고점은 허상이다.

### 🎵 Beat 4. 재현성 (`Stb` / Stability)

- **정의:** 플레이어가 원할 때 `Max`를 뽑아낼 수 있는 확률 (0.0 ~ 1.0).
- **의미:** **"이 장비를 믿을 수 있는가?" (Reliability)**
- **역할:** `Max` 점수의 반영 비율을 결정하는 **게이트키퍼(Gatekeeper)**.

> [시각화: BQM 캔들] 장비의 성능은 주식 차트와 같다.
> 
- **몸통(Body):** `Std`의 영역. 가장 빈번하게 보게 될 성능.
- **꼬리(Shadow):** `Min`과 `Max`의 영역.
- **건전한 장비:** 몸통이 두껍고 아래 꼬리(Min)가 짧은 형태.
- **투기적 장비:** 몸통이 얇고 위 꼬리(Max)만 비정상적으로 긴 형태.

# 3. 절대 가치 산출 공식 (The Formula: Role-Based)

BQM v1.1은 기존의 획일적인 가중치에서 벗어나, 장비의 역할(Role)에 따라 4박자의 중요도를 다르게 부여하는 **'역할 기반 가중치(Role-Based Weighting)'**를 적용한다.

$$Score = (Min \times W_{min}) + (Std \times W_{std}) + Bonus_{pot}$$ $$Bonus_{pot} = (Max - Std) \times Stb \times W_{max}$$

## 3.1. 역할별 가중치 테이블 ($W$)

| 슬롯 | $W_{min}$ (저점) | $W_{std}$ (평균) | $W_{max}$ (고점) | 철학 |
| --- | --- | --- | --- | --- |
| **🫀 방어구** | **2.0** | 1.2 | 0.2 | **전망 이론(Prospect Theory).** 손실 회피 성향을 반영하되, 과도한 보수성을 지양함. |
| **💪 무기** | 0.8 | **1.5** | **1.2** | **타임 어택.** 적을 빨리 배제하는 폭발력이 생존에 기여함. |
| **🦵 신발** | **2.0** | 1.2 | 0.5 | **이진법적 성공.** 닿느냐 못 닿느냐가 전부다. |
| **🧠 장신구** | 0.5 | 1.2 | **1.5** | **게임 체인저.** 변수를 만들어내는 능력이 핵심. |

## 3.2. 동적 조커 보너스 (Dynamic One-Shot Threshold)

안정성($Stb$)이 낮더라도, 해당 장비가 **'현재 목표로 하는 적(Target Tier)'**을 일격에 처치할 수 있는 화력이라면 리스크는 상쇄된다. 단, 이 기준은 적의 수준에 따라 변동되어야 한다.

- **원칙:** $Threshold(Tier) = (BaseHP_{tier} + BaseDEF_{tier}) \times 1.1$
- **동적 임계값 테이블:**
    - **T6 (초반/잡몹):** **12.1 V** (기존 표준)
    - **T5 (정예):** **17.6 V**
    - **T4 (중보스):** **26.4 V** (중반부의 벽)
    - **T3 (위협):** **35.2 V**
    - **T2 이상:** 원샷 불가능 영역으로 간주하여 보너스 제외.
- **보정:** 사용자가 설정한 **타겟 티어**의 임계값을 **$Max \ge Threshold$** 로 달성했다면, $Stb$ 페널티를 **50% 완화**한다.
(해당 등급의 적을 확정적으로 지울 수 있다면, 그 불안정함은 용서된다.)

## 3.3. 턴 압축 보너스 (Turn Compression Bonus)

$Score_{Final} = Score + \text{Bonus}_{save}$

**턴 압축 보너스 (Turn Compression Bonus):** 높은 데미지의 진짜 가치는 '쾌감'이 아니라, 적을 즉사시켜 미래의 행동력(카드)을 아끼는 것이다.

1. **조커 (One-Shot):** $Max \ge Threshold(TargetTier)$ (타겟 적 확정 킬) $\rightarrow$ **+2.5 V** (미래 행동력 보존 가치 추가)
2. **시너지 (Combo):** 2개 이상의 키워드가 유효한 시너지를 낼 때 $\rightarrow$ **+1.5 V**
3. **리스크 보정:** $Min \le 0$ 이지만 $Max \ge 10$인 경우, 불안정성을 감수하는 대가로 **+1.0 V** 보정.

## 3.4. 적의 위협도(가치) 산출

*적의 입장에서 '불안정함'은 플레이어에게 '공포(변수)'가 되므로, 적 데이터에서는 `Stb`가 낮을수록 가중치를 더 주는 역보정 공식을 사용한다.*

# 4. 키워드

'버밀리온: 돨리타스'는 키워드가 게임의 절반 이상을 차지한다고 해도 과언이 아닐 정도로 모든 곳에 사용된다. 키워드란 기존 규칙보다 우선시 되는 특수한 효과를 일컬으며, 모두 `<이렇게>` 표현된다. 키워드는 크게 2가지 종류로 분류되는데, 이는 변수가 있는 키워드와 변수가 없는 키워드가 있다.

- `<밀치기 X>` (Push X): 대상을 공격자로부터 멀어지는 방향으로 X칸만큼 직선으로 밀어냅니다.
- `<관통>` (Penetrate): 이 공격은 대상의 '최종 방어력'을 0으로 취급하고 피해를 줍니다.

변수 X(또는 다른 문자)의 값이 커질 수록, 이 키워드의 가치는 다음 4가지 방식 중 하나를 따를 것이다.

## 4.1. 변수 스케일링 법칙 (Scaling Laws of X)

### **Type A. 체감형 (Logarithmic)**

> "과유불급."
> 
- **공식:** $Val(x) = V_{base} \times (1 + \ln(x))$
- **대상:** 이동(Move), 드로우(Draw), 오염(Corruption).

### **Type B. 선형 (Linear)**

> "정직한 효율."
> 
- **공식:** $Val(x) = V_{base} \times x$
- **대상:** 공격(Atk), 방어(Def), 회복(Heal), 체력(HP).

### **Type C. 체증형 (Exponential)**

> "스노우볼."
> 
- **공식:** $Val(x) = V_{base} \times x^{1.2}$
- **대상:** <밀치기>(Push), <휩쓸기>(AoE).

### **Type D. 계단형 (Step / Threshold)**

> "선을 넘는 순간 압도적이다."
> 
- **공식:** $x \ge Threshold ? (Val \times 1.5) : (Val \times 1.0)$
- **대상:** **사거리(Range)**.
    - *논리:* 적의 평균 사거리(보통 1~2)보다 긴 **사거리 3 이상**은 '맞지 않고 때리는(Free Deal)' 구간이므로 가치가 폭증한다.

# 5. 장비 카드

지금까지의 계산기는 **무기**의 5.0V와 **장신구**의 5.0V를 동일하게 평가했다. **이것은 틀렸다.**

- **논리:**
    - **무기(Arm):** 적을 죽여야 게임이 끝난다. 무기는 클리어를 위한 **'필수재(Essential)'**이다. 경쟁이 치열하고, 요구되는 기준 스펙이 높습니다.
    - **장신구(Head):** 있으면 좋고 없어도 그만인 **'사치재(Luxury)'**이다. 다른 장비(무기/방어구/신발)과 다르게 주사위를 소모하지 않으며, 심지어 일부는 충전 조건을 달성하여 이론상 무한으로 사용할 수 있다.
- **결론:** 무기 슬롯에서의 5.0V는 "평범함"이지만, 장신구 슬롯에서의 5.0V는 "개사기(OP)"이다.
- **해결책: 부위별 가중치 보정 (Slot Coefficient)]**
    - 절대 가치를 산출한 뒤, 해당 장비가 착용되는 **슬롯에 따라 요구되는 '기준점'을 다르게 적용**하거나, 점수에 **보정 계수**를 곱해야 한다.

## 5.1. 장비 등급 계산기

- **최종 공식:** $$EQV = BaseScore \times Gravity_{slot}$$

**자원 희소성 모델 (Scarcity Model)**

| **슬롯** | **보정 계수 (Gravity)** | 근거** |
| --- | --- | --- |
| **무기 (Arm)** | **1.0x** | **[기준점]** 적 처치는 게임의 본질이므로 감점하지 않음. 주사위를 소모하는 정직한 비용. |
| **방어구 (Torso)** | **1.1x** | **[보존 프리미엄]** HP 회복 수단의 희소성을 고려해 가산점 부여. |
| **신발 (Legs)** | **1.2x** | **[전술적 승수]** 위치 선정은 공방 효율을 동시에 증폭시킴. |
| **장신구 (Head)** | **1.1x** | **[무자원 프리미엄]** 주사위 소모 없이 효과를 발휘하는 '공짜 행동(Free Action)' 가치 인정. |

## 5.2. 장비의 재현성

무기/방어구/신발은 1) 용량, 2)일반 효과, 3)임계값, 4)특수 효과 총 4개의 영역을 무조건 가진다. 여기서 일반 효과는 항상 발동되는 효과이다. 예를 들어 채운 주사위 (성질 없음) 만큼 사거리 내의 적 1기에게 피해를 줄 수 있게 하는 것(공격 성질 부여). 하지만 특수 효과는 임계값이라는 특정 조건을 만족하는 주사위를 채워야만 발동하는 효과이다. 예로, 채운 주사위들의 눈금의 합계가 6을 넘는다면, <밀치기 1> 부여. 같은 식이다. 즉, 특수 효과의 재현성은 임계값이라도 봐도 무방하다.

# 6. 적 위협도: 행동과 키워드의 관계

## 6.1. [행동 - 공격/방어/이동] + [행동 - 공격/방어/이동]

적의 위협도(ETV)는 단순히 공격력이 높다고 해서 결정되지 않는다. **"한 번의 행동 기회(Turn)에 얼마나 많은 사건을 발생시키는가"**와 그 사건이 [행동]과 [행동]의 합인지, [행동]과 <키워드>의 합인지, <키워드>와 <키워드>의 합인지에 따라 모두 다른 결과를 나타낸다.

### 6.1.1. 행동 압축률 (Action Compression)

> "적의 행동 한 줄에 담긴 밀도를 측정한다."
> 

적은 정해진 행동 바(Action Bar)를 수행한다. 플레이어의 대응 수단은 한정되어 있으므로, 적이 한 번에 많은 행동을 할수록 플레이어가 느끼는 압박감은 기하급수적으로 증가한다.

- **최종 공식:** $$ETV = BaseScore \times Compression_{bonus}$$

### **Level 1. 단일 행동 (Single Action)**

> 구성: [이동] / [공격] / [방어] 중 택 1 압축 계수: 1.0x (Standard)
> 
- **설명:** 가장 단순한 패턴이다. 적은 이동하거나, 방어력을 올리던가, 제자리에서 공격한다.
- **위협 논리:** 플레이어는 "거리를 벌리면 안 맞는다" 혹은 "맞아주고 딜을 넣는다"라는 **단순한 이지선다**로 해결 가능하다.

### **Level 2. 이중 압축 (Dual Compression)**

> 구성: [이동] / [공격] / [방어] 중 택 2 압축 계수: 1.2x (Tactical)
> 
- **설명:** 적이 거리를 좁힘과 동시에 타격을 가한다. 또는 제자리에서 때려놓고 방어력을 일시적으로 올린다.
- **위협 논리:** 플레이어의 '거리 조절(Kiting)' 전략을 무력화한다. 적의 사거리 밖으로 도망쳐도, 적은 이동 후 공격해오므로 **확정적인 피해**를 강요받는다.

### **Level 3. 삼중 압축 (Triple Compression)**

> 구성: [이동] + [공격] + [방어] 압축 계수: 1.5x (Calamity)
> 
- **설명:** 재앙 수준의 패턴이다. 적은 접근해서(1), 피해를 주고(2), 이따가 찾아올 플레이어의 공격으로 인한 피해도 줄인다(3).
- **위협 논리:** 플레이어는 한 턴에 **방어(피해 경감)**와 **방어를 뚫을 방안**, **이동(도주)**을 동시에 강요받습니다. 자원이 부족해 손해를 보게 될 수 있다.

## 6.2. [행동 - 공격/방어/이동] + <키워드>

적의 위협도를 계산할 때 가장 중요한 것은 **"키워드는 독자적으로 존재할 수 없다"**는 사실이다. 적의 행동 바에 적힌 구성 요소들은 **숙주(Host)**와 **수식어(Modifier)**의 관계를 가진다.

> 공식: $FinalValue = ActionValue \times (1 + KeywordScore)$
> 
- **숙주(Host):** **[공격]**, **[방어]**, **[이동]** 등 수치가 있는 기본 행동.
- **수식어(Modifier):** **<관통>**, **<당기기>**, **<도약>** 등 행동의 성질을 바꾸는 키워드.

### **검증 로직 (Bug Fix):**

- 만약 적 행동 바에 **[공격]** 없이 **<관통>**만 존재한다면? $\rightarrow$ **위협도 0.** (때리지 않는데 방어 무시는 의미가 없음)
- **[공격 1]** + **<관통>:** 방어력 1인 플레이어에게 유효타를 냄. (소폭 위협)
- **[공격 5]** + **<관통>:** 떡장갑 탱커조차 찢어버리는 죽창기. (위협도 기하급수적 상승 - **체증형**)

## 6.3. 성장형 키워드와 공포 계수

기존 모델은 적의 '현재 스펙'과 '미래의 잠재적 위험'을 분리하여 표기하려 했다. 그러나 BQM 4-Beat 모델에서 **'예측 불가능한 폭발력'**은 별도의 주석이 아닌, 위협도 점수(ETV) 그 자체에 반영되어야 한다. 이에 따라 `<격분>`과 같은 성장형 키워드는 별도의 '잠재 위험도' 지표를 생성하는 대신, 적의 **`Max` (최고점) 수치를 강제로 돌파**시키는 방식으로 통합한다.

### **A. 잠재력 개방 이론**

적의 위협도는 평균 데미지가 높을 때보다, **"내가 버틸 수 없는 데미지가 들어올 가능성이 존재할 때"** 급격히 상승한다. 이를 **공포 계수(Horror Factor)**라 정의하며, 이는 `Min`과 `Max`의 격차(Gap)에 비례한다. 성장형 키워드는 적의 저점(`Min`)은 그대로 둔 채 고점(`Max`)만을 기형적으로 높인다. 이는 자연스럽게 변동성을 극대화하며, BQM 공식상 위협 등급을 폭발적으로 상승시킨다.

> 공식: $Max_{Final} = Max_{Dice} + \sum (Keyword_{Potential})$
> 

### **B. 키워드별 잠재력 보정 테이블**

적 위협도 계산기(Calculator)는 적이 보유한 키워드를 스캔하여, `Max` 값에 다음의 **최악의 시나리오(Worst-case Scenario)** 수치를 가산한다.

| **키워드 (Keyword)** | **Max 보정** | **가정된 최악의 시나리오 (Assumption)** |
| --- | --- | --- |
| **<격분>** | **+3** | 아군 다수가 사망하여 위협 토큰 최대치(3개)를 보유한 상태. |
| **<무리 사냥>** | **+2.4** | 동일 종류의 아군이 인접해 있으면 <관통> 부여. |
| **<위협적 존재>** | **+1** | 전투 시작 시점부터 위협 토큰 1개를 보유하여 고점이 상승함. |
| **<약자 도태>** | **+5.4** | 체력이 최대 체력 기준 50% 이하라면 <관통> 부여. |

### **C. 적용 예시: 공포의 수치화**

동일한 주사위(`⬜⬜🟥`)를 가진 두 적을 비교한다.

1. **일반 적 (Standard):**
    - 주사위 Max: 7
    - 격차(Gap): $7 - 2 = 5$
    - **ETV:** 격차에 따른 표준 위협도 적용.
2. **성장형 적 (<격분> 보유):**
    - 주사위 Max: 7 + **3 (보정)** = **10**
    - 격차(Gap): $10 - 2 = \mathbf{8}$
    - **ETV:** 격차가 8로 벌어지며 **공포 계수(불확실성 보정)가 폭발.** 일반 적보다 1~2티어 높은 등급으로 산출됨.

**결론:** 성장형 키워드는 '미래의 가능성'이 아니다. 플레이어가 당장 대비해야 하는 **'방어 행동의 요구치(Max Requirement)'**를 높이는 직접적인 위협 요인이다.

# 7. 장비 등급: 용량과 잠재력

플레이어의 장비는 적과 다르게 '고정된 행동 수치'가 없다. 대신 플레이어가 주사위를 투자하는 만큼 강해진다. 따라서 장비의 가치는 **[용량(Capacity)]**이 결정하는 **잠재력**과 **키워드**의 곱으로 평가된다.

## 7.1. 용량 가치 이론 (Capacity Value Theory)

### 7.1.1. 선형 확장형

주사위가 늘어나는 상황을 반영하면, 용량이 커질수록 가치 계수는 멈추지 않고 계속 올라가야 한다.

| **용량 (Cap)** | **가치 계수** | 성장형 모델 적용 |
| --- | --- | --- |
| **2칸 (Min)** | **1.0x** | **기초.** 초기 상태. 주사위가 3개 이상이어도 2개밖에 못 쓰는 병목 구간. (성장 억제기) |
| **3칸 (Std)** | **1.5x** | **표준.** 초기 주사위(3개)를 모두 소화 가능. 하지만 주사위가 추가되는 순간부터 부족해짐. |
| **4칸 (High)** | **2.0x** | **확장.** 주사위가 4개로 늘어났을 때 이를 온전히 출력으로 변환함. 콤보 및 유틸리티 사용의 핵심 구간. |
| **5칸 (Max)** | **2.5x** | **개방(Unleashed).** 주사위 5개를 모두 쏟아부어 **필살기급 위력**을 냄. 잉여가 아니라 **'최대 포텐셜의 해금'**임. |

### 7.1.2. 체감(Diminishing) 요소는 어디에 있는가?

굳이 '체감' 요소를 찾자면 용량이 아니라 **'주사위 개수 그 자체'**의 효율성에서 발생한다. (1개→2개보다 4개→5개의 증가율이 낮음). 하지만 **[용량]**이라는 스탯 자체는 그 늘어난 주사위를 담는 그릇이므로, 주사위가 늘어나는 속도에 맞춰 **똑같이 중요하게(선형적으로)** 취급해줘야 밸런스가 맞다.

## **7.2. 장비의 증폭 시너지**

장비에 붙은 **<키워드>**는 이 **[용량 계수]**에 곱해져 최종 가치를 형성한다.

- **<관통> 단검 (Cap 2):** 관통 효율이 낮음. (작은 데미지는 관통해도 작음)
- **<관통> 대검 (Cap 4):** 관통 효율이 극대화됨. (큰 데미지가 방어 없이 들어감)

# 8. 키워드적 시너지 (Keywordical Synergy)

적 위협도 계산기를 만들든 장비 등급 계산기를 만들든 공통적으로 적용되는 두 개 이상의 **<키워드>**가 동시에 존재할 때 발생하는 특수 효과이다. 각 조합마다 가중치가 더해지는지 곱해지는지는 다를 것이다.

## 8.1. 주요 시너지

> 조합 1: <당기기 X> + <휩쓸기 X>
> 
- **논리:** <당기기>로 적(또는 플레이어)을 한 점으로 모으고, <휩쓸기>로 광역 타격하여 $X$의 효율을 최대치로 끌어올린다.
- **적 위협도:** 파티 전멸 위기
- **장비 등급:** 최고의 광역 딜링기

> 조합 2: <당기기 X> + <파열 X>
> 
- **논리:** 적을 내 앞으로 끌고 와서(당기기) 처치한 뒤, 사망 시 폭발(파열)시켜 주변 적들에게 피해를 준다. 원거리 적을 강제로 폭탄으로 만드는 전술적 가치가 있다.

> 조합 C: <밀치기 X> + <공성 X>
> 
- **논리:** 애초에 공성이란 키워드 자체가 밀치기/당기기/관통과 무조건 같이 쓰여야만 발동하는 키워드이긴 하지만, 어쨌든. 대상을 벽으로 밀쳐서 충돌을 일으켜 공성 피해와 뼈 가시 타일을 밟는 피해도 준다. 위치 강제와 딜링이 결합된 형태.

# 9. 듀얼 스펙트럼 분석 (Dual-Spectrum Analysis)

BQM 모델은 장비의 절대 가치를 평가하기 위해 플레이어의 가변적인 변수를 제거해야 한다. 플레이어가 '각인 주사위'를 몇 개 들고 있는지, '돌파 주사위'를 몇 개 들고 있는지는 전략의 영역이지 장비 성능의 영역이 아니기 때문이다. 따라서 계산기는 게임 내 존재하는 상반된 성격의 두 주사위를 1:1 비율로 혼합한 **'절대적인 표준 모델'**을 상수로 정의한다.

## 9.1. 실수 평균의 오류 (The Fallacy of Real Numbers)

두 주사위의 평균을 구하기 위해 눈금을 더해 나누는 방식(Arithmetic Mean)은 본 모델에서 철저히 배제한다.

- **오류 예시:** 각인(1) + 돌파(0) ÷ 2 = **0.5**
- **문제점:** 게임 내 자연수 규칙인 **[홀짝], [페어], [스트레이트]** 판별 로직을 붕괴시킨다. 존재하지 않는 눈금인 '0.5'나 '1.5'를 기준으로 밸런스를 잡는 것은 플레이어의 실제 경험(UX)과 괴리감을 만든다.

## 9.2. 12면체 로직 (The 12-Sided Logic)

대형 게임사에서 확률 분포(Distribution)를 통합할 때 사용하는 **'풀링(Pooling)'** 기법을 적용한다. 두 주사위의 눈금을 물리적으로 섞는 것이 아니라, 두 주사위의 **면(Face)**을 모두 뜯어 하나의 가상 주머니(Pool)에 통합한다. 이를 **[표준 믹스 주사위 (Standard Mix Die, 이하 SMD)]**라 칭하며, 그 구성은 다음과 같다.

| **출처** | **눈금 구성** | **특성** |
| --- | --- | --- |
| **각인 (Imprint)** | `{1, 1, 1, 2, 2, 2}` | 저점 보장 (Low Risk) |
| **돌파 (Breakthrough)** | `{0, 0, 1, 3, 3, 3}` | 고점 지향 (High Risk) |
| **표준 믹스 (Mix)** | **`{0, 0, 1, 1, 1, 1, 2, 2, 2, 3, 3, 3}`** | **12면체 가상 주사위** |

이 12면체 주사위는 정수(Integer) 기반이므로 게임의 모든 트리거 규칙과 완벽하게 호환되며, 통계적으로 두 주사위의 성격을 정확하게 50:50으로 대변한다.

## 9.3. 표준 핸드와 고정 확률 (The Standard Hand)

장비 등급 계산기의 모든 확률 연산(`Stb` 산출)은 다음의 **'표준 핸드'**를 기준으로 고정된다.

> 규칙: "플레이어는 표준 믹스 주사위 3개를 굴린다."
> 

장비가 요구하는 모든 임계값 조건은 실시간 시뮬레이션 없이, 이 표준 핸드 기준의 **[고정 확률 테이블]**을 참조하여 즉시 점수로 환산된다. 단, 후술할 **9.5. 최적 적합성 평가($S_{opt}$)**를 수행할 때는 이 고정 확률(SMD 상수)을 사용하지 않고, 선택된 주사위 조합에 맞는 **[재계산된 확률]**을 적용해야 한다.

- **예시 1:** `조건: 합 > 6`
    - 믹스 주사위 3개의 합이 7 이상일 확률 = **15.2%** (상수) $\rightarrow$ `Stb` **0.2**
- **예시 2:** `조건: 짝수`
    - 믹스 주사위(짝수 5개, 홀수 7개)에서 짝수가 나올 확률 = **41.6%** (상수) $\rightarrow$ `Stb` **0.45** 이로써 장비의 등급은 **"가장 평균적인 덱을 가진 플레이어가 겪을 효율"**이라는 절대적 지표를 획득한다. 플레이어가 특정 주사위를 모아 이 확률을 뚫는 것은 계산기가 평가할 항목이 아닌, 플레이어의 **'전략적 성취'**로 남겨둔다.

## 9.4. 복합 조건의 연산 법칙

장비의 특수 효과가 두 가지 이상의 임계값을 동시에 요구할 때(AND 조건), 그 확률은 단순 곱연산($P(A) \times P(B)$)보다 복잡한 양상을 띤다. BQM 모델은 이를 시뮬레이션 없이 처리하기 위해 **'병목과 페널티(Bottleneck & Penalty)'** 원칙을 적용한다.

### **A. 병목의 원칙 (The Bottleneck Principle)**

두 조건 중 달성하기 더 어려운 조건이 전체 확률을 지배한다.

- **예시:** `[Pair] (Stb 0.55)` **AND** `[Sum > 10] (Stb 0.6)`
- **해석:** 합이 10을 넘는 것보다, 페어를 만드는 것이 더 어렵다. 따라서 기본 확률은 더 낮은 `0.55`를 따라간다.

### **B. 복합 페널티 (Compound Penalty)**

두 조건을 동시에 만족시키려 할 때 발생하는 '주사위 눈금의 경직성(Rigidity)'을 반영하여, 병목 확률에 추가적인 감점 계수를 곱한다.

> 공식: $Stb_{final} = \min(Stb_1, Stb_2, ...) \times 0.8$
> 
- **설명:**
    1. 모든 조건의 $Stb$ 중 **최솟값(Min)**을 찾는다.
    2. 여기에 복합 난이도 계수 **0.8**을 곱하여 최종 $Stb$를 산출한다.
- **적용 예시:**
    - 조건: `[Pair] (0.55)` + `[Sum > 10] (0.6)`
    - 계산: $\min(0.55, 0.6) \times 0.8 = 0.55 \times 0.8 = \mathbf{0.44}$
    - **결론:** 이 복합 조건의 재현성($Stb$)은 **0.44**로 평가된다.

## 9.5. 최적 적합성 평가 ($S_{opt}$: Optimal-Fit Evaluation)

기존의 획일적인 이분법(All ⬜ vs All 🟥)이나 단순 평균(SMD)은 특정 주사위 조합에서 폭발적인 성능을 내는 '빌드(Build)'의 잠재력을 평가하지 못한다.
따라서 장비의 잠재력($S_{fit}$)은 용량($N$) 내에서 가능한 모든 주사위 조합을 시뮬레이션하여 산출한다.

### **A. 확률의 동기화 (Probability Synchronization)**

$S_{opt}$ 계산 시 가장 중요한 원칙은 **"출력($Max$)을 바꿨다면, 확률($Stb$)도 그에 맞춰 바꿔야 한다"**는 것이다.
강력한 주사위(예: All Red)를 썼다면, 그에 따른 패널티(낮은 확률)도 정확히 반영해야 한다.

- **오류:** 데미지는 `All Red`(3,3,3)를 쓰고, 확률은 `SMD`(안정적)를 쓰는 체리피킹.
- **정해:** 조합별 고유 확률 테이블(LUT) 사용.
    - 예: `[No 0]` 조건 확률 $\rightarrow$ `SMD`: 85%, `3W`: 100%, `3R`: 29.6%.

### **B. 산출 프로세스**

1. **조합 생성:** 용량이 3이라면 $\{3W\}, \{2W+1R\}, \{1W+2R\}, \{3R\}$ 4가지 케이스 생성.
2. **개별 평가:** 각 케이스별로 **[해당 주사위 기준의 $Max$]**와 **[해당 주사위 기준의 $Stb$]**를 다시 계산하여 4박자 점수 산출.
3. **최적해 선정:** 산출된 점수 중 **가장 높은 값**을 해당 장비의 $S_{opt}$로 채택.

**최종 점수:**
$Score = S_{opt} - \left( \max(0, S_{opt} - S_{mix}) \times 0.2 \right)$
(최적화 고점을 인정하되, 범용성($S_{mix}$)이 너무 떨어지는 '원툴' 장비는 소폭 감점한다.)

# 10. 표준 사이클 이론 (Standard Cycle Theory)

장신구의 가치는 단순히 1회 사용 시의 효과뿐만 아니라, 전투 내내 몇 번이나 재사용할 수 있는가(**지속성**)에 의해 결정된다. 이를 평가하기 위해 BQM 모델은 **'표준 전투 지속 시간'**과 **'충전 난이도 계수'**를 정의한다.

## **A. 표준 전투 상수 (Standard Combat Constant)**

> 규칙: "모든 장신구의 효율 평가는 8턴(Turns) 동안 진행되는 전투를 기준으로 한다."
> 
- **기조:** 전투 초반에만 반짝하고 꺼지는 장비는 장기전에서 '짐(Deadweight)'이 된다.
- **턴 당 기회:** 플레이어는 8번의 충전 기회(자신의 턴)를 갖는다.

## **B. 스노우볼 가중치 (Snowball Weighting)**

로그라이크에서 초반 1턴의 스노우볼은 후반의 1턴보다 훨씬 가치 있다. 따라서 유효 사용 횟수($N_{eff}$)는 단순 합산이 아닌 **구간별 가중 평균**을 사용한다.

$$\text{N}*{eff} = \frac{(N*{T1\sim2} \times \mathbf{3.0}) + (N_{T3\sim5} \times \mathbf{1.5}) + (N_{T6\sim8} \times \mathbf{0.5})}{8.0}$$

- **초반 (1~2턴):** 가중치 **3.0배**. (즉발형 장신구 고평가)
- **후반 (6~8턴):** 가중치 **0.5배**. (예열형 장신구 현실화)

# C. 장신구의 절대 가치 산출 공식

초기 횟수(Initial)의 가치를 8턴으로 나누어 희석(Dilution)시키고, 지속 충전량의 비중을 높인다. $$TrinketScore = EffectValue \times \text{N}_{eff} \times SlotGravity(0.9)$$

# 11. 통합 등급 체계 (Integrated Tier System)

BQM은 장비의 성능(EQV)과 적의 위협도(ETV)를 동일한 '가치(V)' 단위로 환산하여, 게임 내 존재하는 모든 개체의 위상을 6단계의 **절대 등급(Absolute Tier)**으로 규정한다. 이는 밸런싱의 기준점이자, 플레이어가 도달해야 할 성장 목표를 제시한다.

## 11.1. 6티어 스케일 (The 6-Tier Scale)

| **티어 (Tier)** | **등급명** | **장비 점수 (EQV)** | **적 위협도 (ETV)** | **정의 및 위상** |
| --- | --- | --- | --- | --- |
| **T6** | **Trash** | **0 ~ 4.9** | **0 ~ 19.9** | **[무가치/잡몹]** 맨손이나 다름없음 / 쥐, 슬라임 수준. |
| **T5** | **Common** | **5.0 ~ 9.9** | **20 ~ 39.9** | **[보급형/졸개]** 기본 지급 장비 / 경비병, 늑대. (1:1 필승) |
| **T4** | **Uncommon** | **10.0 ~ 14.9** | **40 ~ 69.9** | **[전술형/정예]** 1인분 역할 수행 / 소대장급. (전술 필요) |
| **T3** | **Rare** | **15.0 ~ 24.9** | **70 ~ 119.9** | **[핵심/중보스]** 빌드의 코어 아이템 / 중간 보스. (파티 협동 필수) |
| **T2** | **Legendary** | **25.0 ~ 39.9** | **120 ~ 199.9** | **[결전병기/챕터보스]** 판도를 뒤집는 사기템 / 챕터 최종 보스. (전멸 위기) |
| **T1** | **Mythic** | **40.0 +** | **200.0 +** | **[신화/엔딩보스]** **시스템 붕괴급 위력** / 세계 멸망급 재앙. |

## 11.2. 이론적 한계 (Theoretical Limits)

BQM 모델이 허용하는 시스템 내에서 구현 가능한 **물리적 최저점(Floor)**과 **최고점(Ceiling)**을 정의한다.

### **11.2.1. 최저점 (The Floor): 쥐와 막대기**

시스템이 '장비' 또는 '적'으로 인식할 수 있는 최소한의 수치이다.

- **장비: [T6 부러진 나뭇가지]**
    - **스펙:** 용량 1칸. 효과 없음.
    - **분석:** 임기응변(Improvisation)과 동일한 효율. 전략적 가치는 0에 수렴한다.
    - **EQV:** **1.5 V**.
- **적: [T6 오염된 쥐]**
    - **스펙:** HP 3 | DEF 0.
    - **행동:** 이동 1 + 공격 1 (모든 주사위 구간 동일).
    - **분석:** 플레이어가 주사위 1개만 성공시켜도 확정적으로 처치 가능하며, 위협 수준은 무시 가능하다.
    - **ETV:** **5.0 V**.

### *11.2.2. 최고점 (The Ceiling): 끝판왕 무기와 끝판왕 적

시스템의 제약(방어력, 확률, 용량)을 무시하고 강제로 결과를 도출하는 '엔딩 스펙'이다.

### **A. 최고 장비: [T1 끝판왕 무기]**

단순한 고데미지($High Damage$)를 넘어, 적의 방어 기제를 무력화하고 실패 확률을 0으로 만드는 **'확정적 파괴'** 도구이다.

- **스펙:** 용량 5칸 (Max Cap) | 기본 공격력 +5.
- **특수 로직 (Logic Rows):**
    1. **조건:** `[Full] (주사위 5개)`
    2. **결과:**
        - **`<관통>`:** 보스의 절대 방어(DEF 5+) 무시.
        - **`<도박>`:** `🟥돌파 주사위` 눈금 2배 적용.
        - **`<재굴림>`:** 0이 나올 시 무제한 리롤 (실패 확률 0% 수렴).
        - **`<여파 10>`:** 타격 시 주변 모든 적에게 10 데미지.
- **가치 산출:**
    - 기대 데미지: 약 21 (Dice 16 + Base 5).
    - 보정 계수: 관통($\times 1.5$) + 광역 섬멸($+20V$) + 리스크 제거($\times 1.2$).
    - **EQV:** **약 55.0 V**. (한 번의 공격으로 챕터 보스 빈사, 잡몹 전멸).

### **B. 최고 적: [T1 끝판왕 보스]**

플레이어 파티(4인)가 풀템을 갖추고 도전해도 전멸할 수 있는 재앙적 존재이다.

- **기본 스탯:**
    - **HP 300:** 플레이어 4명이 턴당 20딜씩 집중 포화해도 4라운드를 버틴다.
    - **DEF 5:** T4(Uncommon)급 이하 무기의 공격은 데미지 0으로 무효화한다.
    - **DV (방어 가치):** **470 V**.
- **행동 패턴 (Action Bar):**
    - 🔵 파랑:** **순간이동** (거리 무시) + `[광역 공격 5]`.
    - 🟢 초록:** **`[3회 연속 공격]`** (타당 8 데미지) + `<오염 2>`.
    - **🔴 빨강:** **[세계 붕괴]** (모든 플레이어 HP 50% 감소 + 장비 비활성화).
    - **🟡 노랑 (특수):** **[운명 조작]** 플레이어의 주사위를 강제로 `0`으로 고정.
- **가치 산출:**
    - **ETV:** **530.0 V + @**.
- **공략:** 물리적 타격만으로는 승리가 불가능하다. `<공성>`으로 맵의 기믹을 파괴하여 낙사시키거나, `<반전>`으로 보스의 토큰을 역이용하는 등의 '시스템적 해법'이 필수적이다.

# 13. 키워드 가치 산출: 벡터 시스템

만약 키워드를 단순한 평균값으로 퉁쳐서 더해버리면, **"고점은 높은데 저점은 낮은 장비(High Risk)"**와 **"평범하게 좋은 장비(Stable)"**가 똑같은 점수를 받는 **'평균의 함정'**에 다시 빠지게 된다. 따라서 적 위협도 계산기와 장비 등급 계산기 모두 내부 로직은 다음과 같이 **[2단계 연산]**을 수행해야 한다.

1. **Input 단계:** 모든 키워드는 `[Min, Std, Max, Stb]` 4가지 속성값을 가진다.
2. **Process 단계:** 장비의 기본 스탯에 키워드의 4박자 속성을 **항목별로 합산(Vector Addition)**한다.
3. **Output 단계:** 합산된 최종 `Total Min`, `Total Max` 등을 공식에 넣어 최종 등급을 낸다.

## 13.1. 키워드 4박자 정의 (Keyword 4-Beats)

모든 키워드는 다음 4가지 변수의 변동량($\Delta$)으로 정의된다.

| **요소** | **정의** |
| --- | --- |
| **$\Delta Min$** | **생존/보장성.** 주사위가 망했을 때도 보장되는 효과. |
| **$\Delta Std$** | **평균 효율.** 일반적인 상황에서의 기대값 상승분. |
| **$\Delta Max$** | **잠재력/고점.** 조건이 완벽할 때 터지는 폭발력. |
| **$\Delta Stb$** | **안정성 계수.** 확률을 통제하거나 변수를 줄이는 능력. |

## 13.2. 키워드 유형별 4박자 데이터

단순히 "관통 = 몇점"이 아니라, 관통이 어떤 상황에서 가치를 갖는지 분해해야 한다. 아래의 수치는 정확한 수치가 아닌 예시일 뿐이니, 진짜 키워드의 수치를 내릴때는 정밀히 분석하여 수치를 산출해야 한다.

### **A. 고점 돌파형 (High Ceiling)**

> "조건만 맞으면 최강이다."
> 
- **<관통> (Penetrate)**
    - **Min:** 0.0 (방어력 0인 적에게는 무의미)
    - **Std:** 1.0 (방어력 1인 적 상대로 이득)
    - **Max:** 5.0 (방어력 5인 떡장갑 적 상대로는 데미지 +5와 동급)
    - **Stb:** 0.8 (적의 방어력에 의존적임)
- **<휩쓸기 3> (Sweep 3)**
    - **Min:** 0.0 (적이 1명뿐일 때)
    - **Std:** 1.5 (보통 2명 정도 맞춤)
    - **Max:** 4.5 (3명 다 맞춤 + 위치 선정 완벽)
    - **Stb:** 0.6 (적 배치에 따라 들쑥날쑥함)

### **B. 저점 보완형 (High Floor)**

> "망해도 밥값은 한다."
> 
- **<반격 2> (Retaliate 2)**
    - **Min:** 2.0 (내 턴에 공격 못 해도, 적 턴에 확정 2딜)
    - **Std:** 2.0
    - **Max:** 2.0 (고점은 없음)
    - **Stb:** 1.0 (확정 발동)
- **<범위+1> (Range +1)**
    - **Min:** 1.5 (이동 못 하는 상황에서 때릴 수 있게 해줌. 0딜 $\to$ 1딜)
    - **Std:** 1.5
    - **Max:** 1.5
    - **Stb:** 1.0

### **C. 도박형 (High Risk)**

> "모 아니면 도."
> 
- **<도박> (Gambit)**
    - **Min:** **Total** (실패 시 데미지 0. 치명적 마이너스)
    - **Std:** 1.0 (평균적으로는 이득)
    - **Max:** **$\times 2.0$** (주사위 눈금 2배 뻥튀기)
    - **Stb:** 0.3 (매우 불안정)

## 13.3. 최종 장비/적 가치 산출 알고리즘

장비/적의 최종 등급은 키워드 점수를 다 더한 뒤에 매기는 것이 아니라, **각 박자별로 합산한 뒤 마지막에 공식에 넣는 방식**이어야 한다.

> 잘못된 방식 (Scalar Sum): 장비점수(10) + 관통점수(3) + 도박점수(2) = 15점 (특색이 사라짐)
> 

> 올바른 방식 (Vector Sum):
> 
> 1. **Min 합산:** 장비기본(2) + 관통(0) + 도박(-5) = **3 (위험!)**
> 2. **Max 합산:** 장비기본(5) + 관통(5) + 도박(10) = **20 (폭발적!)**
> 3. 최종 공식 대입: $$Score = (3 \times W_{min}) + ...$$ $\rightarrow$ 결과: "고점은 개사기지만 쓰다가 자멸할 수 있는 예능용 검" (정확한 분석)

# 14. 자원 변환의 4박자 모델링

연소와 응축은 단순한 자원 교환이 아니다. 이는 현재의 안정성(`Min`)과 미래의 잠재력(`Max`)을 거래하는 행위이며, **남은 라운드($R$)**에 따라 그 등급이 극적으로 변동한다.

### **14.1. 🔥 연소 (Combustion): [성장형 투자 모델]**

> 정의: 행동 카드 1장 소모($-2.5V$) $\rightarrow$ 주사위 1개 영구 추가($+1.5V \times R$).
> 
> 
> 특성: 당장의 생존(Min)을 위협하지만, 미래의 평균(Std)과 고점(Max)을 높인다.
> 
- **Min (최저점) = -2.5 V**
    - **논리:** 당장 쓸 수 있는 카드(행동권)를 태워버리는 것은 즉각적인 전력 손실이다. 적이 코앞에 있을 때 연소하는 건 자살행위다. ($R$과 무관한 고정 비용)
- **Std (표준값) = -2.5 + (1.5 $\times$ R)**
    - **논리:** 카드를 잃은 대신, 남은 $R$ 라운드 동안 매번 주사위를 굴려 얻는 기대 이득의 총합이다.
- **Max (최고점) = Std + 5.0 V**
    - **논리:** 주사위 풀이 늘어나면 고용량 장비(`[Full]`, `[5개 이상]`)의 조건을 달성할 수 있게 된다. 이 **'해금(Unlock)'** 가치를 +5.0V로 책정한다.
- **Stb (재현성) = 1.0**
    - **논리:** 주사위 추가는 확정적으로 이루어진다.

### **📊 BQM 점수 산출 ($R$에 따른 변화)**

> 공식: $Score = (Min \times 2) + Std + (Max - Std) \times Stb \times 0.5$ $\Rightarrow (-2.5 \times 2) + Std + (5.0 \times 0.5) = \mathbf{-2.5 + Std}$
> 
- **초반 (R=10):**
    - $Std = -2.5 + 15 = 12.5$
    - **Score = 10.0 (T2 전설급)** $\rightarrow$ 무조건 해야 함.
- **후반 (R=1):**
    - $Std = -2.5 + 1.5 = -1.0$
    - **Score = -3.5 (T6 폐급)** $\rightarrow$ 하면 손해.

### **14.2. 💧 응축 (Condensation): [채무형 필살기 모델]**

> 정의: 주사위 1개 영구 제거($-1.5V \times R$) $\rightarrow$ 카드 1장 획득($2.5V$) + 완전 공명($3.0V$).
> 
> 
> 특성: 미래의 자원(Min)을 갉아먹어 현재의 고점(Max)과 안정성(Stb)을 강제로 고정한다.
> 
- **Min (최저점) = 5.5 - (1.5 $\times$ R)**
    - **논리:** 응축의 대가는 미래의 '주사위 고갈'이다. 라운드가 많이 남았을수록($R$이 클수록) 누적 손실이 커져 파산(`Min`)에 이른다. (당장 얻는 이득 5.5V - 미래 손실)
- **Std (표준값) = Min**
    - **논리:** 주사위 제거는 확정된 미래 손실이므로 `Std`는 `Min`과 동일하게 따라간다.
- **Max (최고점) = Min + 3.0 V**
    - **논리:** 응축으로 가져온 카드가 결정적인 킬(Kill)을 내거나 슈퍼 세이브를 할 경우, 그 가치는 단순 수치 이상이다.
- **Stb (재현성) = 1.0 (절대 확정)**
    - **논리:** **완전 공명**은 주사위를 굴리지 않고 최댓값으로 고정한다. 실패 확률이 0%다.

### **📊 BQM 점수 산출 ($R$에 따른 변화)**

> 공식: $Score = (Min \times 2) + Std + (Max - Std) \times Stb \times 0.5$ $\Rightarrow (Min \times 3) + (3.0 \times 0.5) = \mathbf{3 \times Min + 1.5}$
> 
- **초반 (R=10):**
    - $Min = 5.5 - 15.0 = -9.5$
    - **Score = -27.0 (논외 등급)** $\rightarrow$ 게임을 던지는 행위.
- **막타 (R=1):**
    - $Min = 5.5 - 1.5 = 4.0$
    - **Score = 13.5 (T4~T3급)** $\rightarrow$ 강력한 피니시.